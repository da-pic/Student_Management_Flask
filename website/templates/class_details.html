<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Chi tiết lớp học</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        /* Hover hiệu ứng cho bảng */
        tbody tr:hover {
            background-color: #e0f2ff;
            transition: background-color 0.3s;
            cursor: pointer;
        }
        th, td {
            vertical-align: middle;
        }
        .table-responsive {
            max-height: 400px;
            overflow-y: auto;
        }
    </style>
</head>
<body class="bg-light p-4">

<div class="container">
    <!-- Thông tin lớp học -->
    <div class="card shadow-sm rounded-4 p-4 mb-4">
        <h1 class="text-primary mb-4">Thông tin lớp học</h1>
        <p><strong>Mã lớp:</strong> {{ course_class.course_class_id }}</p>
        <p><strong>Tên môn học:</strong> {{ course_class.course_name }} ({{ course_class.course_id }})</p>
        <p><strong>Số tín chỉ:</strong> {{ course_class.volume }}</p>
        <p><strong>Giảng viên:</strong> {{ course_class.lecturer_name }} - {{ course_class.lecturer_email }} - {{ course_class.lecturer_contact }}</p>
        <p><strong>Sĩ số:</strong> {{ student_count }}</p>
    </div>

    <!-- Danh sách sinh viên -->
    <div class="card shadow-sm rounded-4 p-4 mb-3">
        <h2 class="text-primary mb-4">Danh sách sinh viên</h2>
        <div class="table-responsive">
            <table class="table table-bordered table-hover align-middle text-center mb-0">
                <thead class="table-secondary">
                    <tr>
                        <th>Mã SV</th>
                        <th>Họ tên</th>
                        <th>Email</th>
                    </tr>
                </thead>
                <tbody>
                    {% for s in students %}
                    <tr data-bs-toggle="modal" data-bs-target="#studentModal"
                        data-id="{{ s.student_id }}"
                        data-name="{{ s.student_name }}"
                        data-email="{{ s.student_email }}"
                        data-gender="{{ s.student_gender }}"
                        data-administrative="{{ s.administrative_class }}">
                        <td>{{ s.student_id }}</td>
                        <td>{{ s.student_name }}</td>
                        <td>{{ s.student_email }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <!-- Nút quay lại -->
    <a href="{{ url_for('views.home', student_id=session['user_id'], tab='lop-tin-chi') }}" 
       class="btn btn-primary">
        ← Quay lại
    </a>
</div>

<!-- Modal chi tiết sinh viên -->
<div class="modal fade" id="studentModal" tabindex="-1" aria-labelledby="studentModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="studentModalLabel">Thông tin sinh viên</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Đóng"></button>
      </div>
      <div class="modal-body">
        <p><strong>Mã SV:</strong> <span id="modalStudentId"></span></p>
        <p><strong>Họ tên:</strong> <span id="modalStudentName"></span></p>
        <p><strong>Giới tính:</strong> <span id="modalStudentGender"></span></p>
        <p><strong>Email:</strong> <span id="modalStudentEmail"></span></p>
        <p><strong>Lớp hành chính:</strong> <span id="modalStudentAdministrative"></span></p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
      </div>
    </div>
  </div>
</div>

<!-- Bootstrap JS Bundle -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script>
    var studentModal = document.getElementById('studentModal');
    studentModal.addEventListener('show.bs.modal', function (event) {
        var button = event.relatedTarget;
        var id = button.getAttribute('data-id');
        var name = button.getAttribute('data-name');
        var email = button.getAttribute('data-email');
        var gender = button.getAttribute('data-gender');
        var administrative = button.getAttribute('data-administrative');

        document.getElementById('modalStudentId').textContent = id;
        document.getElementById('modalStudentName').textContent = name;
        document.getElementById('modalStudentEmail').textContent = email;
        document.getElementById('modalStudentGender').textContent = gender;
        document.getElementById('modalStudentAdministrative').textContent = administrative;
    });
</script>
</body>
</html>